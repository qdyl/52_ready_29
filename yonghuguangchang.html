<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no,initial-scale=1">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset-init.css">
    <link rel="stylesheet" href="css/page-styles.css">
</head>
<body>
    <header id="arrow-text-center">
        <i class="back-arrow-icon" onclick="history.go(-1)"></i>
        <h4>用户广场</h4>
        <div class="curse-items">
            <ul class="clearfix-zl">
                <li class="curse-item active fl">推荐</li>
                <li class="curse-item fl">语文</li>
                <li class="curse-item fl">数学</li>
                <li class="curse-item fl">英语</li>
                <li class="curse-item fl">化学</li>
                <li class="curse-item fl">物理</li>
                <li class="curse-item fl">政治</li>
                <li class="curse-item fl">历史</li>
                <li class="curse-item fl">美术</li>
                <li class="curse-item fl">其他</li>
            </ul>
        </div>
        <div class="little-down-arrow">
            <i class="down-arrow"></i>
        </div>

    </header>
    <div class="height-100"></div>
    <section id="yonghuguangchang">
        <ul class="yonghu-lists">
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention has-cared fr">已关注</span>
                    </div>
                </div>
            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
            <li class="yonghu-list clearfix-zl">
                <div class="text-and-icon fl">
                    <i class="yonghu-icon"></i>
                    <div class="h4-span fl">
                        <h4>孔三涮</h4>
                        <span>500回答</span><span>899000关注</span>
                        <span class="add-attention fr">+ 关注</span>
                    </div>
                </div>

            </li>
        </ul>
    </section>
    <!--取消关注的弹层-->
    <div class="popup-mask yonghuguangchang-not-attention">
        <div class="popup-center">
            <h4>确定要取消关注<span class="color-yonghu">Bing Bing</span>吗？</h4>
            <div class="cancel-confirm-text"><span class="attention-cancel">取消</span><span class="attention-confirm">确定</span></div>
        </div>

    </div>
    <!-- 全部话题的弹层-->
    <div class="popup-mask yonghuguangchang-all-topics">
        <div class="all-topics">
            <h4>全部话题</h4>
            <i class="little-up-arrow"></i>
            <ul class="topics-items clearfix-zl">
                <li class="topic-itme active-hover fl"><span>推荐</span></li>
                <li class="topic-itme fl"><span>语文</span></li>
                <li class="topic-itme fl"><span>数学</span></li>
                <li class="topic-itme fl"><span>英语</span></li>
                <li class="topic-itme fl"><span>化学</span></li>
                <li class="topic-itme fl"><span>物理</span></li>
                <li class="topic-itme fl"><span>政治</span></li>
                <li class="topic-itme fl"><span>历史</span></li>
                <li class="topic-itme fl"><span>美术</span></li>
                <li class="topic-itme fl"><span>其他</span></li>
            </ul>
            <div class="topic-confirm"><span >确认</span></div>
        </div>

    </div>


</body>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<script>
    $(function () {
        // 动态设置科目的宽度
        let leng = $(".curse-item").length+1,totalwidth = $(".curse-item:first").innerWidth()*leng;
        $(".curse-items ul").width(totalwidth);

        // 点击下拉箭头，展示全部话题
        $(".little-down-arrow").on("click",function () {
            $(".yonghuguangchang-all-topics").css("display","block");
        });
        // 在下拉展示的区域：点选科目
        $(".topic-itme").on("click",function () {
            $(this).addClass("active-hover").siblings(".topic-itme").removeClass("active-hover");
            let indexx = $(this).index();
            $(".curse-item").eq(indexx).addClass("active").siblings(".curse-item").removeClass("active");
            if(indexx>4){
                let offwidth = $(".curse-item:first").innerWidth()*indexx;
                $(".curse-items").scrollLeft(offwidth);
                console.log($(".curse-items").scrollLeft());
            }

        });
        // 点击"确认"关闭 全部话题
        $(".topic-confirm").on("click",function () {
            $(".yonghuguangchang-all-topics").css("display","none");
        });

        // 点击上拉箭头，收起全部话题
        $(".little-up-arrow").on("click",function () {
            $(".yonghuguangchang-all-topics").css("display","none");
        });

        // 点选话题，保持一致
        $(".curse-item").click(function(){
            $(this).addClass("active").siblings(".curse-item").removeClass("active");
            let index = $(this).index();
            $(".topic-itme").eq(index).addClass("active-hover").siblings(".topic-itme").removeClass("active-hover")
        });

        // 点击取消，关闭"确认要取消关注"弹窗
        $(".attention-cancel,.attention-confirm").on("click",function () {
           /* if($(this).hasClass("attention-confirm")){
                $(this).addClass("news");
            }*/
            $(".yonghuguangchang-not-attention").css("display","none");
        });

        // "取消关注"
        let num;
        $(".add-attention").on('click', function(event) {
            event.preventDefault();
            if($(this).text() === "已关注"){
                num = $(this).parent().parent().parent().index();
                $(".yonghuguangchang-not-attention").fadeIn('fast');
            }else{
                $(this).addClass("has-cared");
                let aa = ($(this).text()==="+ 关注" ?"已关注":"+ 关注");
                $(this).text(aa);
            }
        });
        $(".cancel-confirm-text").on('click', 'span', function(event) {
            event.preventDefault();
            if($(this).hasClass('attention-confirm')){
                // let text = $(".yonghu-list").eq(num).find(".add-attention").text();
                $(".yonghu-list").eq(num).find(".add-attention").removeClass("has-cared").text("+ 关注");
                num = "";
                $(".yonghuguangchang-not-attention").fadeOut();
            }else{
                $(".yonghuguangchang-not-attention").fadeOut();
                num = "";
            }
        });





    });




</script>
</html>